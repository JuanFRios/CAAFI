<div>
	<button mat-button [matMenuTriggerFor]="main_menu">
		<i class="material-icons">more_vert</i> <span *ngIf="!activeForm">Seleccione
			formulario</span> <span *ngIf="activeForm" class="titleform"> {{activeDependencie.name+ " - " +activeForm }}</span>
	</button>

	<mat-menu #main_menu="matMenu">
		<ng-container *ngFor="let mainItem of dependencies">
			<button mat-menu-item [matMenuTriggerFor]="sub_menu">{{ mainItem.name }}</button>
			<mat-menu #sub_menu="matMenu">
				<button *ngFor="let subItem of mainItem.forms" mat-menu-item (click)="loadForm(subItem , mainItem)">{{ subItem.name }}</button>
			</mat-menu>
		</ng-container>
	</mat-menu>

	<div class="container">

		<div *ngIf="activeForm">
			<form [formGroup]="form" (ngSubmit)="onSubmit(formData)">
				<formly-form [model]="formData" [fields]="formFields" [options]="options" [form]="form">
				<!--<button mat-raised-button color="primary" type="button"
				(click)="loadData()">Load Data</button>-->
				<button mat-raised-button color="primary" type="submit" [disabled]="!form.valid">
					Guardar</button>
				</formly-form>
			</form>

			<div [hidden]="!cargando">
				<mat-spinner></mat-spinner>
				<h4>Guardando...</h4>
			</div>
			<div *ngIf="errorMessage" class="error">
				<p *ngFor="let error of errorMessage">{{error}}</p>
			</div>
			<div *ngIf="exito" class="exito">
				<p>El formulario fue guardado con Ã©xito</p>
			</div>

			<div id="dataTable" class="container" fxLayout="row" fxLayout.sm="column" fxLayout.xs="column" fxLayoutAlign.gt-md="space-around center"
			fxLayoutGap="10px">

			<mat-card fxFlex>
			 <mat-card-content class="contenedor-tabla">
			   <div class="mat-container mat-elevation-z8">
			     <div class="mat-header">
			       <mat-form-field floatPlaceholder="never" class="input-filtro">
			         <input matInput #filter placeholder="Filtrar">
			       </mat-form-field>
			     </div>

			     <mat-table #table [dataSource]="dataSource" class="mat-table">

						 <ng-container matColumnDef="edit" id="actionsCell">
			         <mat-header-cell *matHeaderCellDef class="mat-header-cell">  </mat-header-cell>
			         <mat-cell *matCellDef="let row" class="mat-cell">
								 <button mat-raised-button color="primary" type="button" (click)="loadData( row.id )">Editar</button>
							 </mat-cell>
			       </ng-container>

			       <ng-container *ngFor="let col of displayedColumnsData" matColumnDef="{{ col }}">
			         <mat-header-cell *matHeaderCellDef class="mat-header-cell"> {{ displayedColumnsNames[col] }} </mat-header-cell>
			         <mat-cell *matCellDef="let row" class="mat-cell"> {{row.data[col]}} </mat-cell>
			       </ng-container>

			       <mat-header-row *matHeaderRowDef="displayedColumns" class="mat-header-row"></mat-header-row>
			       <mat-row *matRowDef="let row; columns: displayedColumns;" class="mat-row"></mat-row>
			     </mat-table>


			   <mat-paginator
			     #paginator
			     [length]="paginatorSize"
			     [pageIndex]="0"
			     [pageSize]="5"
			     [pageSizeOptions]="[5, 10, 25, 100]">
				 </mat-paginator>

			   </div><!-- .md-container -->
			 </mat-card-content>
		 </mat-card>


			</div>


		</div>
	</div>
	<ngx-loading [show]="loading" [config]="{ fullScreenBackdrop: true }"></ngx-loading>
</div>
